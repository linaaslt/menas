<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title> Menas - menininkai </title>
<link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
      rel = "stylesheet">
<style>
		h3 {
	 		text-align:center;
		}
		table {
			text-align:center;
			clear: both;
		}
		th {
			background-color: Chocolate;
		}
		nav a {
			display: inline-block;
			padding: 12px;
			margin: 12px;
			text-decoration: none;
			color: Brown;
			background-color: Aquamarine;
			-webkit-border-radius: 8px;
			-moz-border-radius: 8px;
			border-radius: 8px;		
			-webkit-box-shadow: 10px 10px 5px 0px rgba(0,0,0,0.75);
			-moz-box-shadow: 10px 10px 5px 0px rgba(0,0,0,0.75);
			box-shadow: 10px 10px 5px 0px rgba(0,0,0,0.75);		
		}
		nav a:hover {
			text-decoration: underline;	
			background-color: Aqua;	
		}
		form {
			
			width: 600px;
		}

		input, textarea, label {
		
			width: 100%;
			padding: 7px;
			margin: 7px;
		}
		
		input[type=submit] {
		
			width: 40%;
			float: right;
			margin-right: 23px;
		}				
		
		input {
		
			-webkit-border-radius: 7px;
			-moz-border-radius: 7px;
			border-radius: 7px;	
		}
	</style>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
   $( function() {
   
	   var avail_menininkai;
	   
	   alert( 'pries' );
	   
		$.ajax({
		
			url: "http://localhost:8080/ajax/lst-menininkai"
							
		}).done( 
		
			function ( data_menininkai ) {
			
				avail_menininkai = data_menininkai;
			}
		);	   
	   
	   alert ( 'po: ' + avail_menininkai.length );
	   
	   $( "#project" ).autocomplete({
	   
	      minLength: 0,
	      source: avail_menininkai,
	      focus: function( event, ui ) {
	        $( "#menininkas" ).val( ui.item.pav );
	        return false;
	      },
	      select: function( event, ui ) {
	      
	        $( "#menininkas" ).val( ui.item.pav );
	        $( "#id_menininko" ).val( ui.item.id );
	
	        return false;
	      }
	    })
	    .autocomplete( "instance" )._renderItem = function( ul, item ) {
	    
	      return $( "<li>" )
	        .append( "<div>" + item.pav + "</div>" )
	        .appendTo( ul );
	    };
  });
  </script>
</head>
<body>
	<nav>
		<a th:each="menu_item : ${lst_menu}" th:href="${menu_item.itemurl()}" th:text="${menu_item}"></a>
	</nav>

	<h3> Menininkai </h3>
	<form method="post" action="">
		<label for="menininkas">Menininkas</label>
		<input type="text" id="menininkas">
		<input type="hidden" id="id_menininko">		
		<label for="metai_gimimo">Metai gimimo</label>
		<input type="number" name="metai_gimimo">
		<label for="tautybe">Tautybė</label>		
		<input type="text" name="tautybe">
		<label for="apras">Aprašymas</label>		
		<textarea name="apras"></textarea>				
		<input type="submit" name="irasas" value="papildyti">
	</form>
	<table>
		<tr>	
			<th>Menininkas</th>
			<th>Gimimo metai</th> 
			<th>Tautybe</th>
			<th>Aprašymas</th>			
		</tr>
		<tr th:each="kurejas : ${menininkai}">
			<td th:text="${kurejas.getPav()}"></td>	
			<td th:text="${kurejas.getMetaiGimimo()}"></td>
			<td th:text="${kurejas.getTautybe()}"></td>	
			<td th:text="${kurejas.getApras()}"></td>					
		</tr>
	</table>					
</body>
</html>